
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>aiotg.chat &#8212; aiotg 0.9.4 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.9.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for aiotg.chat</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;aiotg&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="Chat"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat">[docs]</a><span class="k">class</span> <span class="nc">Chat</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wrapper for telegram chats, passed to most callbacks</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Chat.send_text"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_text">[docs]</a>    <span class="k">def</span> <span class="nf">send_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a text message to the chat.</span>

<span class="sd">        :param str text: Text of the message to send</span>
<span class="sd">        :param options: Additional sendMessage options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendmessage</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span></div>

<div class="viewcode-block" id="Chat.reply"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.reply">[docs]</a>    <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reply to the message this `Chat` object is based on.</span>

<span class="sd">        :param str text: Text of the message to send</span>
<span class="sd">        :param dict markup: Markup options</span>
<span class="sd">        :param str parse_mode: Text parsing mode (``&quot;Markdown&quot;``, ``&quot;HTML&quot;`` or</span>
<span class="sd">            ``None``)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">markup</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_text</span><span class="p">(</span>
            <span class="n">text</span><span class="p">,</span>
            <span class="n">reply_to_message_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;message_id&quot;</span><span class="p">],</span>
            <span class="n">disable_web_page_preview</span><span class="o">=</span><span class="s1">&#39;true&#39;</span><span class="p">,</span>
            <span class="n">reply_markup</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">json_serialize</span><span class="p">(</span><span class="n">markup</span><span class="p">),</span>
            <span class="n">parse_mode</span><span class="o">=</span><span class="n">parse_mode</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.edit_text"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.edit_text">[docs]</a>    <span class="k">def</span> <span class="nf">edit_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edit the message in this chat.</span>

<span class="sd">        :param int message_id: ID of the message to edit</span>
<span class="sd">        :param str text: Text to edit the message to</span>
<span class="sd">        :param dict markup: Markup options</span>
<span class="sd">        :param str parse_mode: Text parsing mode (``&quot;Markdown&quot;``, ``&quot;HTML&quot;`` or</span>
<span class="sd">            ``None``)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">markup</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">edit_message_text</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="p">,</span>
            <span class="n">text</span><span class="p">,</span>
            <span class="n">reply_markup</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">json_serialize</span><span class="p">(</span><span class="n">markup</span><span class="p">),</span>
            <span class="n">parse_mode</span><span class="o">=</span><span class="n">parse_mode</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.edit_reply_markup"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.edit_reply_markup">[docs]</a>    <span class="k">def</span> <span class="nf">edit_reply_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">markup</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edit only reply markup of the message in this chat.</span>

<span class="sd">        :param int message_id: ID of the message to edit</span>
<span class="sd">        :param dict markup: Markup options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">edit_message_reply_markup</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="p">,</span>
            <span class="n">reply_markup</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">json_serialize</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.get_chat"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.get_chat">[docs]</a>    <span class="k">def</span> <span class="nf">get_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get information about the chat.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;getChat&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.get_chat_administrators"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.get_chat_administrators">[docs]</a>    <span class="k">def</span> <span class="nf">get_chat_administrators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of administrators in a chat. Chat must not be private.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;getChatAdministrators&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.get_chat_members_count"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.get_chat_members_count">[docs]</a>    <span class="k">def</span> <span class="nf">get_chat_members_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the number of members in a chat.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;getChatMembersCount&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.get_chat_member"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.get_chat_member">[docs]</a>    <span class="k">def</span> <span class="nf">get_chat_member</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get information about a member of a chat.</span>

<span class="sd">        :param int user_id: Unique identifier of the target user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;getChatMember&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">user_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_sticker"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_sticker">[docs]</a>    <span class="k">def</span> <span class="nf">send_sticker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sticker</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a sticker to the chat.</span>

<span class="sd">        :param sticker: Sticker to send (file or string)</span>
<span class="sd">        :param options: Additional sendSticker options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendsticker)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendSticker&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">sticker</span><span class="o">=</span><span class="n">sticker</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_audio"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_audio">[docs]</a>    <span class="k">def</span> <span class="nf">send_audio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send an mp3 audio file to the chat.</span>

<span class="sd">        :param audio: Object containing the audio data</span>
<span class="sd">        :param options: Additional sendAudio options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendaudio)</span>

<span class="sd">        :Example:</span>

<span class="sd">        &gt;&gt;&gt; with open(&quot;foo.mp3&quot;, &quot;rb&quot;) as f:</span>
<span class="sd">        &gt;&gt;&gt;     await chat.send_audio(f, performer=&quot;Foo&quot;, title=&quot;Eversong&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendAudio&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">audio</span><span class="o">=</span><span class="n">audio</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_photo"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_photo">[docs]</a>    <span class="k">def</span> <span class="nf">send_photo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">photo</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a photo to the chat.</span>

<span class="sd">        :param photo: Object containing the photo data</span>
<span class="sd">        :param str caption: Photo caption (optional)</span>
<span class="sd">        :param options: Additional sendPhoto options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendphoto)</span>

<span class="sd">        :Example:</span>

<span class="sd">        &gt;&gt;&gt; with open(&quot;foo.png&quot;, &quot;rb&quot;) as f:</span>
<span class="sd">        &gt;&gt;&gt;     await chat.send_photo(f, caption=&quot;Would you look at this!&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendPhoto&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">photo</span><span class="o">=</span><span class="n">photo</span><span class="p">,</span>
            <span class="n">caption</span><span class="o">=</span><span class="n">caption</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_video"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_video">[docs]</a>    <span class="k">def</span> <span class="nf">send_video</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">video</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send an mp4 video file to the chat.</span>

<span class="sd">        :param video: Object containing the video data</span>
<span class="sd">        :param str caption: Video caption (optional)</span>
<span class="sd">        :param options: Additional sendVideo options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendvideo)</span>

<span class="sd">        :Example:</span>

<span class="sd">        &gt;&gt;&gt; with open(&quot;foo.mp4&quot;, &quot;rb&quot;) as f:</span>
<span class="sd">        &gt;&gt;&gt;     await chat.send_video(f)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendVideo&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">video</span><span class="o">=</span><span class="n">video</span><span class="p">,</span>
            <span class="n">caption</span><span class="o">=</span><span class="n">caption</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_document"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_document">[docs]</a>    <span class="k">def</span> <span class="nf">send_document</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a general file.</span>

<span class="sd">        :param document: Object containing the document data</span>
<span class="sd">        :param str caption: Document caption (optional)</span>
<span class="sd">        :param options: Additional sendDocument options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#senddocument)</span>

<span class="sd">        :Example:</span>

<span class="sd">        &gt;&gt;&gt; with open(&quot;file.doc&quot;, &quot;rb&quot;) as f:</span>
<span class="sd">        &gt;&gt;&gt;     await chat.send_document(f)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendDocument&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">document</span><span class="o">=</span><span class="n">document</span><span class="p">,</span>
            <span class="n">caption</span><span class="o">=</span><span class="n">caption</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_voice"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_voice">[docs]</a>    <span class="k">def</span> <span class="nf">send_voice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">voice</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send an OPUS-encoded .ogg audio file.</span>

<span class="sd">        :param voice: Object containing the audio data</span>
<span class="sd">        :param options: Additional sendVoice options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendvoice)</span>

<span class="sd">        :Example:</span>

<span class="sd">        &gt;&gt;&gt; with open(&quot;voice.ogg&quot;, &quot;rb&quot;) as f:</span>
<span class="sd">        &gt;&gt;&gt;     await chat.send_voice(f)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendVoice&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
            <span class="n">voice</span><span class="o">=</span><span class="n">voice</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_location"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_location">[docs]</a>    <span class="k">def</span> <span class="nf">send_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a point on the map.</span>

<span class="sd">        :param float latitude: Latitude of the location</span>
<span class="sd">        :param float longitude: Longitude of the location</span>
<span class="sd">        :param options: Additional sendLocation options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendlocation)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendLocation&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span>
            <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_venue"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_venue">[docs]</a>    <span class="k">def</span> <span class="nf">send_venue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send information about a venue.</span>

<span class="sd">        :param float latitude: Latitude of the location</span>
<span class="sd">        :param float longitude: Longitude of the location</span>
<span class="sd">        :param str title: Name of the venue</span>
<span class="sd">        :param str address: Address of the venue</span>
<span class="sd">        :param options: Additional sendVenue options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendvenue)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendVenue&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span>
            <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">address</span><span class="o">=</span><span class="n">address</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_contact"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_contact">[docs]</a>    <span class="k">def</span> <span class="nf">send_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phone_number</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send phone contacts.</span>

<span class="sd">        :param str phone_number: Contact&#39;s phone number</span>
<span class="sd">        :param str first_name: Contact&#39;s first name</span>
<span class="sd">        :param options: Additional sendContact options (see</span>
<span class="sd">            https://core.telegram.org/bots/api#sendcontact)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendContact&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">phone_number</span><span class="o">=</span><span class="n">phone_number</span><span class="p">,</span>
            <span class="n">first_name</span><span class="o">=</span><span class="n">first_name</span><span class="p">,</span>
            <span class="o">**</span><span class="n">options</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.send_chat_action"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.send_chat_action">[docs]</a>    <span class="k">def</span> <span class="nf">send_chat_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a chat action, to tell the user that something is happening on the</span>
<span class="sd">        bot&#39;s side.</span>

<span class="sd">        Available actions:</span>

<span class="sd">        *  `typing` for text messages</span>
<span class="sd">        *  `upload_photo` for photos</span>
<span class="sd">        *  `record_video` and `upload_video` for videos</span>
<span class="sd">        *  `record_audio` and `upload_audio` for audio files</span>
<span class="sd">        *  `upload_document` for general files</span>
<span class="sd">        *  `find_location` for location data</span>

<span class="sd">        :param str action: Type of action to broadcast</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;sendChatAction&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">action</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.forward_message"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.forward_message">[docs]</a>    <span class="k">def</span> <span class="nf">forward_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_chat_id</span><span class="p">,</span> <span class="n">message_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Forward a message from another chat to this chat.</span>

<span class="sd">        :param int from_chat_id: ID of the chat to forward the message from</span>
<span class="sd">        :param int message_id: ID of the message to forward</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;forwardMessage&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">from_chat_id</span><span class="o">=</span><span class="n">from_chat_id</span><span class="p">,</span>
            <span class="n">message_id</span><span class="o">=</span><span class="n">message_id</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.kick_chat_member"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.kick_chat_member">[docs]</a>    <span class="k">def</span> <span class="nf">kick_chat_member</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use this method to kick a user from a group or a supergroup.</span>
<span class="sd">        The bot must be an administrator in the group for this to work.</span>

<span class="sd">        :param int user_id: Unique identifier of the target user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;kickChatMember&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.unban_chat_member"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.unban_chat_member">[docs]</a>    <span class="k">def</span> <span class="nf">unban_chat_member</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use this method to unban a previously kicked user in a supergroup.</span>
<span class="sd">        The bot must be an administrator in the group for this to work.</span>

<span class="sd">        :param int user_id: Unique identifier of the target user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bot</span><span class="o">.</span><span class="n">api_call</span><span class="p">(</span>
            <span class="s2">&quot;unbanChatMember&quot;</span><span class="p">,</span>
            <span class="n">chat_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Chat.is_group"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.is_group">[docs]</a>    <span class="k">def</span> <span class="nf">is_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if this chat is a group.</span>

<span class="sd">        :return: ``True`` if this chat is a group, ``False`` otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;group&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;supergroup&quot;</span></div>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">,</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">chat_type</span><span class="o">=</span><span class="s2">&quot;private&quot;</span><span class="p">,</span> <span class="n">src_message</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span> <span class="o">=</span> <span class="n">bot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">src_message</span>
        <span class="k">if</span> <span class="n">src_message</span> <span class="ow">and</span> <span class="s1">&#39;from&#39;</span> <span class="ow">in</span> <span class="n">src_message</span><span class="p">:</span>
            <span class="n">sender</span> <span class="o">=</span> <span class="n">src_message</span><span class="p">[</span><span class="s1">&#39;from&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sender</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;N/A&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sender</span> <span class="o">=</span> <span class="n">Sender</span><span class="p">(</span><span class="n">sender</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">chat_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">chat_type</span>

<div class="viewcode-block" id="Chat.from_message"><a class="viewcode-back" href="../../index.html#aiotg.chat.Chat.from_message">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_message</span><span class="p">(</span><span class="n">bot</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a ``Chat`` object from a message.</span>

<span class="sd">        :param Bot bot: ``Bot`` object the message and chat belong to</span>
<span class="sd">        :param dict message: Message to base the object on</span>
<span class="sd">        :return: A chat object based on the message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chat</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;chat&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Chat</span><span class="p">(</span><span class="n">bot</span><span class="p">,</span> <span class="n">chat</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">chat</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">],</span> <span class="n">message</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TgChat"><a class="viewcode-back" href="../../index.html#aiotg.chat.TgChat">[docs]</a><span class="k">class</span> <span class="nc">TgChat</span><span class="p">(</span><span class="n">Chat</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;TgChat is depricated, use Chat instead&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="Sender"><a class="viewcode-back" href="../../index.html#aiotg.chat.Sender">[docs]</a><span class="k">class</span> <span class="nc">Sender</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A small wrapper for sender info, mostly used for logging&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">uname</span> <span class="o">=</span> <span class="s2">&quot; (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;username&quot;</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">uname</span></div>


<div class="viewcode-block" id="TgSender"><a class="viewcode-back" href="../../index.html#aiotg.chat.TgSender">[docs]</a><span class="k">class</span> <span class="nc">TgSender</span><span class="p">(</span><span class="n">Sender</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;TgSender is depricated, use Sender instead&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">aiotg</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=szastupov&repo=aiotg&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Stepan Zastupov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    
    <a href="https://github.com/szastupov/aiotg" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>